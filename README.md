

# StalCraft Models Detection

## –ò–¥–µ—è
–ò–¥–µ—è –±—ã–ª–∞ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ–π (–ø–∞—Ä—É –∑–Ω–∞–∫–æ–º—ã—Ö —Ç–æ–≤–∞—Ä–∏—â–µ–π –∏–≥—Ä–∞—é—Ç –≤ STALCRAFT). –ó–∞—Ö–æ—Ç–µ–ª–æ—Å—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–¥–∞—á—É CV - –∞ –∏–º–µ–Ω–Ω–æ –∑–∞–¥–∞—á–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π —á–µ–ª–æ–≤–µ–∫–∞ –≤ –∏–≥—Ä–µ STALCRAFT. 
*–¶–µ–ª—å*:  –°–¥–µ–ª–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º UI –Ω–∞ –±–∞–∑–µ gradio –¥–ª—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏.
*–î–∞—Ç–∞—Å–µ—Ç* - https://universe.roboflow.com/michael-gorrg/stalcraft-flcil. –≠—Ç–æ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ —Ñ–æ—Ç–æ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –≤ –∏–≥—Ä–µ.
![sample](images/sample.jpg)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
üìÇ StalCraft-Detection
‚îú‚îÄ‚îÄ üìÇ configs							# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ ‚öôÔ∏è parameters_file.yaml					# –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ üìÇ data							# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏ 
‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è dataset.yaml						# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–±—É—á–µ–Ω–∏—è YOLO
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ images						# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ labels						# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è YOLO					
‚îú‚îÄ‚îÄ üêç app.py							# –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ gradio
‚îú‚îÄ‚îÄ üêç infer.py							# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ 
‚îú‚îÄ‚îÄ üêç train.py							# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üêç utils.py							# –°–∫—Ä–∏–ø—Ç —Å —É—Ç–∏–ª–∑–∞–º–∏
‚îú‚îÄ‚îÄ üêç download.py						# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞
‚îú‚îÄ‚îÄ üìù README.md
‚îî‚îÄ‚îÄ üìÑ requirements.txt					
```
##  –ó–∞–ø—É—Å–∫
–£—Å—Ç–∞–Ω–æ–≤–∫–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫:
1. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ 
``` pip3 install -r requirements.txt```

2. –°–∫–∞—á–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç. –î–ª—è —ç—Ç–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
	* –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–∞–π—Ç–µ [Roboflow](https://universe.roboflow.com/)
	* –ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∞—Ç–∞—Å–µ—Ç–∞ [Dataset](https://universe.roboflow.com/michael-gorrg/stalcraft-flcil/dataset/9/download), –≤—ã–±—Ä–∞—Ç—å Download Dataset->Show download code
	* –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å API-–∫–ª—é—á –∏–∑ –ø–æ–ª—è api_key: `rf = Roboflow(api_key="‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà")`
	* –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç: `python3 download.py` –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ø–æ–ª–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á.
–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Ä–∞—Å–ø–æ–ª–æ–≥–∞—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ data.
3.  –î–ª—è –¥–æ–æ–±—É—á–µ–Ω–∏—è –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö YOLO-–º–æ–¥–µ–ª–µ–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:
```python3 train.py --config configs/parameters_file.yaml```
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ –ø—É—Ç–∏: `/my_project/models/model_name`

4. –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –º–æ–¥–µ–ª–∏: ```python3 infer.py --config configs/parameters_file.yaml --model yolov8s```
–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–π –¥–µ–ª–∞–µ—Ç—Å—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–µ–Ω—è—Ç—å/—É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –≤ –ø–æ–ª–µ `image_paths`.  –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–∂–∞—Ç—å `0` –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ```python3 app.py --config configs/parameters_file.yaml --model yolov8s```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞: `http://127.0.0.1:7860`

–í–º–µ—Å—Ç–æ yolov8s –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å yolov8l, yolov8m —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. 
	

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–¥–µ–ª–∏ yolo8s, yolo8l, yolo8m –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ultralytics.

## –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
–û—Å–Ω–æ–≤–Ω–æ–π –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ñ–∞–π–ª: `parameters_file.yaml`. –ï–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–µ–¥—É—é—â–∞—è:
```
data:
	json_path: "data/train/_annotations.coco.json" # –ü—É—Ç—å –¥–æ JSON-—Ñ–∞–π–ª–∞ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
	images_dir: "data/images" # –ü—É—Ç—å –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
	labels_dir: "data/labels" # –ü—É—Ç—å –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º bbox-–æ–≤
	yaml_path: "data/dataset.yaml" # –ü—É—Ç—å –¥–æ YAML-—Ñ–∞–π–ª–∞ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ YOLO

training:
	epochs: 50 # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö
	batch: 8 # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∫–∞
	imgsz: 640 # –†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
	project: "my_training/models" # –ü—É—Ç—å –¥–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—É—á–µ–Ω–∏—è
	name: "" # –ò–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ–±—É—á–µ–Ω–∏—è

inference:
	image_paths: # –ü—É—Ç—å –¥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
	- "data/images/test/Screenshot-2023-01-19-091442_png.rf.6b7c7a0777c09b47d9bd08bc0e5cde2d.jpg" 
	conf: 0.5 # Confidence score

pretrained_models: # –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–æ–¥–µ–ª–µ–π
	- yolov8s.pt
	- yolov8m.pt
	- yolov8l.pt
```


## –†–µ–∑—É–ª—å—Ç–∞—Ç
–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö: 
1.  mAP50 ‚âà 0.957
2. mAP50-95 ‚âà 0.694

![result](images/result.jpg)
